{{ if .Params.audioFile }}
<div class="podcast-player">
  <div class="player-container">
    <audio id="audio-player" preload="metadata">
      <source src="{{ .Params.audioFile }}" type="audio/mpeg">
      A böngésződ nem támogatja az audio lejátszást.
    </audio>
    
    <div class="player-controls">
      <button id="play-pause" class="play-button" aria-label="Play/Pause">
        <svg class="play-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
          <path d="M8 5v14l11-7z"/>
        </svg>
        <svg class="pause-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="display:none;">
          <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
        </svg>
      </button>
      
      <div class="time-display">
        <span id="current-time">0:00</span>
      </div>
      
      <div class="progress-container">
        <input type="range" id="progress-bar" class="progress-bar" min="0" max="100" value="0" step="0.1">
      </div>
      
      <div class="duration-display">
        <span id="duration">{{ if .Params.duration }}{{ .Params.duration }}{{ else }}0:00{{ end }}</span>
      </div>
      
      <div class="volume-control">
        <button id="mute-button" class="volume-button" aria-label="Mute/Unmute">
          <svg class="volume-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/>
          </svg>
          <svg class="mute-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;">
            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
            <line x1="23" y1="9" x2="17" y2="15"/>
            <line x1="17" y1="9" x2="23" y2="15"/>
          </svg>
        </button>
        <input type="range" id="volume-slider" class="volume-slider" min="0" max="100" value="100">
      </div>
    </div>
  </div>
</div>

<script>
(function() {
  const audio = document.getElementById('audio-player');
  const playPauseBtn = document.getElementById('play-pause');
  const playIcon = document.querySelector('.play-icon');
  const pauseIcon = document.querySelector('.pause-icon');
  const progressBar = document.getElementById('progress-bar');
  const currentTimeDisplay = document.getElementById('current-time');
  const durationDisplay = document.getElementById('duration');
  const muteBtn = document.getElementById('mute-button');
  const volumeIcon = document.querySelector('.volume-icon');
  const muteIcon = document.querySelector('.mute-icon');
  const volumeSlider = document.getElementById('volume-slider');
  
  if (!audio) return;
  
  // Format time helper
  function formatTime(seconds) {
    const mins = Math.floor(seconds / 60);
    const secs = Math.floor(seconds % 60);
    return `${mins}:${secs.toString().padStart(2, '0')}`;
  }
  
  // Play/Pause
  playPauseBtn.addEventListener('click', () => {
    if (audio.paused) {
      audio.play();
      playIcon.style.display = 'none';
      pauseIcon.style.display = 'block';
    } else {
      audio.pause();
      playIcon.style.display = 'block';
      pauseIcon.style.display = 'none';
    }
  });
  
  // Update progress bar and time
  audio.addEventListener('timeupdate', () => {
    const progress = (audio.currentTime / audio.duration) * 100;
    progressBar.value = progress || 0;
    currentTimeDisplay.textContent = formatTime(audio.currentTime);
  });
  
  // Load duration
  audio.addEventListener('loadedmetadata', () => {
    durationDisplay.textContent = formatTime(audio.duration);
  });
  
  // Seek functionality
  progressBar.addEventListener('input', () => {
    const time = (progressBar.value / 100) * audio.duration;
    audio.currentTime = time;
  });
  
  // Mute/Unmute
  muteBtn.addEventListener('click', () => {
    audio.muted = !audio.muted;
    if (audio.muted) {
      volumeIcon.style.display = 'none';
      muteIcon.style.display = 'block';
    } else {
      volumeIcon.style.display = 'block';
      muteIcon.style.display = 'none';
    }
  });
  
  // Volume control
  volumeSlider.addEventListener('input', () => {
    audio.volume = volumeSlider.value / 100;
  });
})();
</script>
{{ end }}
